(this.$WP=this.$WP||[]).push(["ddsxom",(e,i)=>{var t,n,a,r,o,l,s,c,d,m,p,u,_,h,g,f,b,y,v,w,C,x,T,M,P,I,D,A,N,B,k,E,F,S,j,L,O,W=({title:e,children:i})=>t(h,{marginBottom:"spacing-04",className:"dGhag",children:i?n(a,{children:[t(d,{variant:"supporting-02",color:"secondaryText",marginBottom:"spacing-02",children:e}),i]}):void 0}),q=({isMobile:e,onClick:i})=>t(A,{variant:"primary",fullWidth:e,onClick:i,children:t(m,{id:"plus_trial_confirmation_explore_experiences"})}),K=({isMobile:e,isTrial:i,...n})=>t(N,{...n,marginTop:e?"spacing-05":void 0,children:i?t(m,{id:"plus_trial_confirmation_manage_membership"}):t(m,{id:"plus_paywall_hr_confirmation_manage_subscription"})}),R=({isMobile:e,onExploreExperiences:i,isTrial:a,...r})=>n(h,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",children:[t(E,{isMobile:e,onClick:i}),t(F,{isMobile:e,...r,isTrial:a})]}),Y={standaloneManageSubscription:"F"},z=({hotelId:e,isMobile:i,onNavigateToHr:a,...r})=>e?n(h,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",children:[t(A,{variant:"primary",onClick:a,fullWidth:i,children:t(m,{id:"plus_paywall_hr_confirmation_continue_to_hotel"})}),t(N,{...r,marginTop:i?"spacing-05":void 0,children:t(m,{id:"plus_paywall_hr_confirmation_manage_subscription"})})]}):t(h,{display:"flex",className:Y.standaloneManageSubscription,children:t(A,{...r,variant:"primary",fullWidth:i,children:t(m,{id:"plus_paywall_hr_confirmation_manage_subscription"})})}),H=(e,i,t)=>{switch(e){case"hotels":default:return{href:"/OptimusAccountManager",target:"_blank",onClick:t};case"attractions":return{href:"/OptimusAccountManager",target:"_blank"};case"memberCenter":return{href:"#",onClick:i}}},V=({variant:e,hotelId:i,isMobile:n,isTrial:a,closeModal:r,onNavigateToHr:o,onNavigateToMembership:l,onExploreExperiences:s})=>{var c=L(e,r,l);switch(e){case"attractions":return t(S,{isMobile:n,onExploreExperiences:s,isTrial:a,...c});case"memberCenter":case"hotels":return t(j,{hotelId:i,isMobile:n,onNavigateToHr:o,...c});default:return null}},U={contentContainer:"aFgkL",divider:"pAdKo Mk MK",manageSubscriptionButtonContainer:"AFojj Na"},$="Hotel_Review",G=({variant:e})=>{switch(e){case"attractions":return t(m,{id:"plus_trial_confirmation_title"});case"hotels":return t(m,{id:"plus_paywall_confirmation_title_v2"});default:return null}},J=({variant:e})=>{switch(e){case"attractions":return t(m,{id:"plus_trial_confirmation_message_v2"});case"hotels":return t(m,{id:"plus_paywall_hr_confirmation_member_only_message"});default:return null}},Q=({subscription:e,variant:i,visibleRef:r,sensitiveFlow:o,subscriptionFetching:l,paymentDataFetching:s,primaryCard:c,creditCardType:p,acctNumberTail:_,expMonth:b,expYear:v,formattedRenewalDate:w,formattedPurchaseDate:C,membershipButtonProps:x,onExploreExperiences:T,intlFormatter:M,primaryTokenizedPayment:P})=>{var I=e?.trialDetails,D="MOBILE"===g(),A=e?.subscriptionPrice?.amountPaid,N=I?.trialPeriodPrice,B=N?.totalAmount&&N?.discountAmount?.discountAmount?N?.totalAmount-N?.discountAmount?.discountAmount:0;return n("div",{className:U.contentContainer,ref:r,children:[t(u,{variant:"plus-logo-short",height:44}),t(d,{variant:"expressive-display-03",marginTop:"spacing-03",marginBottom:"spacing-03",children:t(G,{variant:i})}),o&&t(d,{variant:"title-05",children:t(m,{id:"plus_trial_confirmation_membership_details_subtitle",args:{email:o?.email}})}),l||s?n(a,{children:[t(f,{height:24,width:"100%",marginTop:6}),t(f,{height:24,width:"70%",marginTop:6}),t(f,{height:24,width:"70%",marginTop:6}),t(f,{height:24,width:"100%",marginTop:6,marginBottom:6})]}):n(h,{display:"flex",marginTop:"spacing-04",flexDirection:["column","row","row"],flexWrap:"wrap",justifyContent:"space-between",children:[A&&t(k,{title:t(m,{id:"plus_confirmation_price_section"}),children:t("span",{children:t(m,{id:"plus_trial_account_management_price_today_v2",args:{0:M.formatCurrencyInteger(B),numMonths:I?.trialPeriodDuration||0}})})}),e?.subscriptionNumber&&t(k,{title:t(m,{id:"plus_confirmation_membership_number_section"}),children:t(d,{variant:"body-01",children:e.subscriptionNumber})}),t(k,{title:t(m,{id:"plus_confirmation_payment_section"}),children:c&&t(y,{paymentMethod:P?{provider:"APPLE_PAY"===P.paymentType?"ApplePay":"PayPal",email:P.email}:{cardType:p,numberTail:_,expiryMonth:b,expiryYear:v},hideExpiration:!0,cardNumberLeadMessage:"•••• •••• ••••"})}),C&&t(k,{title:c?t(m,{id:"plus_confirmation_date_purchased_section"}):t(m,{id:"plus_confirmation_start_date_section"}),children:t(d,{variant:"body-01",children:C})}),w&&t(k,{title:t(m,{id:"plus_confirmation_date_renews_section_v2"}),children:t(d,{variant:"body-01",children:w})}),t(h,{display:"flex",alignItems:"flex-end",marginBottom:"spacing-04",className:U.manageSubscriptionButtonContainer,children:t(F,{isMobile:D,...x,isTrial:!0})})]}),t("div",{className:U.divider}),t(d,{variant:"body-01",marginTop:"spacing-02",marginBottom:"spacing-02",children:t(m,{id:"plus_trial_confirmation_message_v3"})}),t(E,{isMobile:D,onClick:T})]})},X=({funnelKey:e,closeModal:i,hotelId:r,variant:_="hotels"})=>{var A=C(),N=x(),B=o(()=>e||P(),[e]),E=T(),F=null!==M(),{clearDiscountCode:S}=D();l(()=>{S()});var[{data:j,fetching:W},q]=I(),[K,R]=s(0);l(()=>{!(K<3)||j?.isMember||W||(R(K+1),q())},[K,q,j,W]);var Y=w(()=>{A({optimusConfirmationModal:{locationId:r,funnelKey:B,pageviewUid:E}})}),z=c(e=>{N({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:e,locationId:r,isMemberSignedIn:F,servletName:$,funnelKey:B}}})},[B,N,F,r]),H=c(()=>{i(),z("HR")},[i,z]),V=c(()=>{z("PlusMembershipCenter")},[z]),X=c(()=>{i()},[i]),Z=g(),ee=p(),[ei]=b(),[{data:et,fetching:en}]=v({billingAccountId:j?.billingAccountId}),ea=et?.storedCardId?et:null,er=et?.storedTokenizedPaymentId?et:null,{acctNumberTail:eo,creditCardType:el,expMonth:es,expYear:ec}=ea||{},ed=j?.trialDetails,em=ed?.trialStatus==="ACTIVE",ep=j?.subscriptionPrice?.amountPaid,eu=j?.nextCharge?.totalAmount,e_=!!j?.subscriptionPrice?.discountAmount&&0===ep,eh=!!j?.subscriptionPrice?.discountAmount&&(null==eu||null==ep||eu>ep),eg=j?.startDate?ee.formatDate("date_long",j.startDate):null,ef=null;j?.renewalDate&&(ef=ee.formatDate("date_long",j.renewalDate)),!j?.autoRenew&&j?.endDate&&!em&&(ef=t(m,{id:"plus_management_center_non_renewing_member",args:{0:ee.formatDate("date_long",j.endDate)}}));var eb=t(O,{variant:_,isMobile:"MOBILE"===Z,isTrial:em,hotelId:r,closeModal:i,onNavigateToHr:H,onNavigateToMembership:V,onExploreExperiences:X}),ey=L(_,i,V);return em?t(Q,{subscription:j,variant:_,visibleRef:Y,sensitiveFlow:ei,subscriptionFetching:W,paymentDataFetching:en,amountPaid:ep,primaryCard:ea,creditCardType:el,acctNumberTail:eo,expMonth:es,expYear:ec,formattedRenewalDate:ef,formattedPurchaseDate:eg,membershipButtonProps:ey,onExploreExperiences:X,intlFormatter:ee,primaryTokenizedPayment:er}):n("div",{className:U.contentContainer,ref:Y,children:[t(u,{variant:"plus-logo-short",height:44}),t(d,{variant:"expressive-display-03",marginTop:"spacing-03",marginBottom:"spacing-03",children:t(G,{variant:_})}),t(d,{variant:"body-01",marginTop:"spacing-02",children:t(J,{variant:_})}),t("div",{className:U.divider}),t(d,{variant:"title-05",children:t(m,{id:"plus_paywall_hr_confirmation_membership_details_title"})}),ei&&t(d,{variant:"body-01",marginTop:"spacing-01",children:t(m,{id:"plus_paywall_hr_confirmation_membership_details_subtitle",args:{email:ei?.email}})}),W||en?n(a,{children:[t(f,{height:24,width:"100%",marginTop:6}),t(f,{height:24,width:"70%",marginTop:6}),t(f,{height:24,width:"70%",marginTop:6}),t(f,{height:24,width:"100%",marginTop:6,marginBottom:6})]}):n(h,{display:"flex",marginTop:"spacing-04",flexDirection:["column","row","row"],flexWrap:"wrap",justifyContent:"space-between",children:[!em&&(ep||e_)&&n(k,{title:t(m,{id:"plus_confirmation_price_section"}),children:[t(d,{variant:"body-01",children:ep?t(m,{id:"plus_account_management_price_per_year",args:{0:Math.floor(ep)===ep?ee.formatCurrencyInteger(ep):ee.formatCurrency(ep)}}):ee.formatCurrencyInteger(0)}),eh&&ea&&t(d,{variant:"supporting-01",children:t(m,{id:"plus_account_management_price_discounted"})})]}),j?.subscriptionNumber&&t(k,{title:t(m,{id:"plus_confirmation_subscription_number_section"}),children:t(d,{variant:"body-01",children:j.subscriptionNumber})}),t(k,{title:t(m,{id:"plus_confirmation_payment_section"}),children:(ea||er)&&t(y,{paymentMethod:er?{provider:"APPLE_PAY"===er.paymentType?"ApplePay":"PayPal",email:er.email}:{cardType:el,numberTail:eo,expiryMonth:es,expiryYear:ec},hideExpiration:!0,cardNumberLeadMessage:"•••• •••• ••••"})}),eg&&t(k,{title:ea?t(m,{id:"plus_confirmation_date_purchased_section"}):t(m,{id:"plus_confirmation_start_date_section"}),children:t(d,{variant:"body-01",children:eg})}),ef&&t(k,{title:t(m,{id:"plus_confirmation_date_renews_section"}),children:t(d,{variant:"body-01",children:ef})})]}),t(h,{marginTop:"spacing-04",marginBottom:"spacing-05",children:eb})]})},Z=({funnelKey:e,closeModal:i,hotelId:n})=>{var a=x(),r=o(()=>e||P(),[e]),l=null!==M();return t(_,{onClose:c(()=>{i(),a({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:"Dismiss",locationId:n,isMemberSignedIn:l,servletName:$,funnelKey:r}}})},[i,r,a,l,n]),backgroundColor:"beige",children:t(X,{funnelKey:r,hotelId:n,closeModal:i})})};return[()=>{B=r(!1),k=W,E=q,F=K,S=R,j=z,L=H,O=V,e({IsConfirmationModalOpen:B,SubscriptionConfirmation:X,default:Z})},[e=>(t=e.jsx,n=e.jsxs,a=e.Fragment),e=>(r=e.createContext,o=e.useMemo,l=e.useEffect,s=e.useState,c=e.useCallback),e=>d=e.default,e=>(m=e.default,p=e.useIntlFormatter),e=>u=e.default,e=>_=e.ModalContainer,e=>h=e.Box,e=>g=e.useViewportCategory,e=>f=e.default,e=>b=e.useSensitiveFlowState,e=>y=e.default,e=>v=e.useDefaultPaymentData,e=>w=e.useOnVisible,e=>C=e.useImpressionLogger,e=>x=e.useInteractionLogger,e=>T=e.usePageviewUid,e=>M=e.useUserId,e=>P=e.uuid,e=>I=e.useOptimusSubscription,e=>D=e.useDiscountCodePersistance,e=>(A=e.default,N=e.BorderlessButton)]]},["21h32l","o4yt4q","essqvy","7thqz4","sw5ax0","i3sz5h","lyyh8d","ys6v1o","u59av4","4lbe82","os3i1m","shvqii","3btuy0","vumu0s","32pwc7","fgwvq1","52far5","eww825","i9ixrv","36016d","jppfwt"]]);
