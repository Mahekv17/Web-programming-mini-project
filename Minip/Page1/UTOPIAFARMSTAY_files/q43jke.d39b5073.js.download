(this.$WP=this.$WP||[]).push(["q43jke",(e,t)=>{var i,a,n,r,o,l,s,c,d,u,p,m,v,h,f,y,T,g,b,I,k,w,N,R,B,C,q,_,M,S,j,z={__key:0x6bb628c49399,id:"6bb628c49399e8da",loc:{},definitions:[]},A=()=>"invalidateAndRefetch",D=()=>{var e=T(),t="geoId"in e?.params&&e.params?.geoId||1,[{fetching:i,data:a},n]=R({query:z,variables:{geoId:t},pause:!0},{addItemToTrip:A,tripsRemoveItem:A,tripsRemoveReference:A,createTrip:A,Trips_createTrip:A,Trips_copyTripItem:()=>"invalidateAndRefetch"}),r=o(()=>{n({requestPolicy:"network-only"})},[n]);return[{fetching:i,recentTrip:a?.userTrip,geoId:t},r]},E={buttonMargin:"muhZz"},O=e=>i("div",{className:e.isMobile?E.buttonMargin:void 0,children:i(B,{saveObject:{id:e.id,type:e.type},allowPopStatModal:!0,children:(t,a)=>i(C,{active:a,onClick:t,decorated:!1,bookmarkStyle:"outline",bookmarkSize:"20",asButton:!0,fullWidth:e.isMobile,children:()=>"Save to Trip"})})}),x={__key:1209045768215,id:"011980be58179363",loc:{},definitions:[]},L=e=>{var[t]=q({query:x,variables:{locationId:e||1},pause:!e});return t.fetching||t.error?null:t.data?.locations?.[0]?.names?.name},W=(e,t,i)=>{var a=l(t),n=l(i),[r,d]=s(!1),u=o(()=>d(!1),[d]);return c(()=>{if(!e)return()=>{};var t=setTimeout(()=>d(!0),a.current);return()=>clearTimeout(t)},[e,a]),c(()=>{if(!r)return()=>{};var e=setTimeout(u,n.current);return()=>clearTimeout(e)},[r,u,n]),c(()=>r?(window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}):()=>{},[r,u]),[r,u]},Z={footer:"kcxIj D B1 Z BB k",tripDescription:"RnKfS Cj _u",cta:"bBWzk q",ctaButton:"gyhvZ",saveCta:"aNepR",titleRow:"yXCZj k",title:"b q o W",saveCount:"RhIkn q",countRow:"sQhRc",count:"olcnV",planningBox:"Rdavf D",planningTitle:"oRSbw b",planningBody:"EyNtG H5",planningIconOuter:"qKrMm B1 Z BB",planningIcon:"EvTyu"},P=({onDismiss:e,isMobile:t,geoId:n})=>{var r=S(n);return r?a("div",{className:Z.planningBox,children:[i(I,{on:"bottom",from:t?"center":"left",offset:20}),i("div",{className:Z.planningTitle,children:"Let's keep planning!"}),a("div",{className:Z.planningBody,children:["See a hotel that looks good to you? Simply click",i("span",{className:Z.planningIconOuter,children:i("span",{className:Z.planningIcon,children:i(p,{})})}),"to save and view it on a map for your upcoming trip to ",r,"."]}),i(f,{variant:"primary",onClick:e,children:"Got it!"})]}):null},Q=(e,t)=>(e?.detailCounts||[]).filter({hotels:e=>e?.locationType==="ACCOMMODATION",restaurants:e=>e?.locationType==="EATERY",attractions:e=>e?.locationType==="ATTRACTION"||e?.locationType==="ACTIVITY"||e?.saveType==="attractionproduct"}[t]).map(e=>e?.count||0).reduce((e,t)=>e+t,0),V=e=>{if(e){var t=Date.parse(e);if((Date.now()-t)/864e5>30)return!1}return!0},F=e=>{if(e){var t=Date.parse(e);return Date.now()-t<=5e3}return!1},G=({footerShownCallback:e})=>{var t=g(),o=T(),l="detailId"in o?.params?o.params.detailId:void 0,s="MOBILE"===t,[{fetching:c,recentTrip:f,geoId:I}]=_(),R=b(),B=f?.route?.url,C=w(),q=N(),[S,z]=j(F(f?.created),2e3,3e3),A=!c&&f?.id!==void 0&&V(f?.updated);return r.useEffect(()=>{if(e&&e(A),A){var t=f?.id;t&&R&&k.set("mostRecentlyAddedToTrip",{tripId:t,userId:R},144e5),q({trips:{element:"view_persistent_footer",tripId:f?.id}})}},[e,A,q,f,R]),A?a(n,{children:[a("div",{className:Z.footer,children:[a("div",{className:Z.tripDescription,children:[a("div",{className:Z.titleRow,children:[i("div",{className:Z.title,children:f?.title}),a("div",{className:Z.saveCount,children:[i(p,{size:22}),i("span",{className:Z.count,children:f?.size})]})]}),a("div",{className:Z.countRow,children:[i(m,{size:22}),i("span",{className:Z.count,children:Q(f,"hotels")}),i(u,{size:22}),i("span",{className:Z.count,children:Q(f,"attractions")}),i(v,{size:22}),i("span",{className:Z.count,children:Q(f,"restaurants")})]})]}),a("div",{className:Z.cta,children:[l&&i("div",{className:d(Z.ctaButton,Z.saveCta),children:i(M,{isMobile:s,id:l,type:"location"})}),i("div",{className:Z.ctaButton,children:i("a",{href:B??"#",children:i(h,{legacyStyled:!1,fullWidth:s,size:s?"small":"medium",onClick:()=>{C({Trips:{elementClick:{element:"omni_trip_view"}}})},children:i(y,{id:"cx_trips_view_cta"})})})})]})]}),S&&i(P,{onDismiss:z,isMobile:s,geoId:I})]}):null};return[()=>{_=D,M=O,S=L,j=W,e("default",G)},[e=>(i=e.jsx,a=e.jsxs,n=e.Fragment),e=>(r=e,o=e.useCallback,l=e.useRef,s=e.useState,c=e.useEffect),e=>d=e.default,e=>u=e.default,e=>p=e.default,e=>m=e.default,e=>v=e.default,e=>(h=e.default,f=e.BorderlessButton),e=>y=e.default,e=>T=e.useRoute,e=>g=e.useViewportCategory,e=>b=e.useUserId,e=>I=e.Arrow,e=>k=e.default,e=>w=e.useInteractionLogger,e=>N=e.useImpressionLogger,e=>R=e.useInvalidatableQuery,e=>B=e.QueriedTripFlowSelector,e=>C=e.BookmarkIcon,e=>q=e.useQuery]]},["21h32l","o4yt4q","fkji80","s1ymgp","l75rcq","c5q3iu","o3mm96","jppfwt","7thqz4","fgwvq1","ys6v1o","52far5","79a2um","9b9b10","32pwc7","vumu0s","fbuhsy","9rb8bq","hfpjvp","mqwhqn"]]);
