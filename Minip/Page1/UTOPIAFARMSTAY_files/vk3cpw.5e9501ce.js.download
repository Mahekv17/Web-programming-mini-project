(this.$WP=this.$WP||[]).push(["vk3cpw",(e,t)=>{function r(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function a(e){return r(1,arguments),!isNaN(function(e){r(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&Error().stack,new Date(NaN))}(e))}var n,o,i,s,l,u,c,m,d,p,g,h,f,y,v,D,T,b,N,I={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},C=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,P=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,S=/^([+-])(\d{2})(?::?(\d{2}))?$/;function k(e,t){r(1,arguments);var a,n,o=t||{},i=null==o.additionalDigits?2:function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(o.additionalDigits);if(2!==i&&1!==i&&0!==i)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var s=function(e){var t,r={},a=e.split(I.dateTimeDelimiter);if(a.length>2)return r;if(/:/.test(a[0])?(r.date=null,t=a[0]):(r.date=a[0],t=a[1],I.timeZoneDelimiter.test(r.date)&&(r.date=e.split(I.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){var n=I.timezone.exec(t);n?(r.time=t.replace(n[1],""),r.timezone=n[1]):r.time=t}return r}(e);if(s.date){var l=function(e,t){var r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(r);if(!a)return{year:null};var n=a[1]&&parseInt(a[1]),o=a[2]&&parseInt(a[2]);return{year:null==o?n:100*o,restDateString:e.slice((a[1]||a[2]).length)}}(s.date,i);a=function(e,t){if(null===t)return null;var r,a,n=e.match(C);if(!n)return null;var o=!!n[4],i=R(n[1]),s=R(n[2])-1,l=R(n[3]),u=R(n[4]),c=R(n[5])-1;if(o)return u>=1&&u<=53&&c>=0&&c<=6?((r=new Date(0)).setUTCFullYear(t,0,4),a=r.getUTCDay()||7,r.setUTCDate(r.getUTCDate()+((u-1)*7+c+1-a)),r):new Date(NaN);var m=new Date(0);return s>=0&&s<=11&&l>=1&&l<=(O[s]||(w(t)?29:28))&&i>=1&&i<=(w(t)?366:365)?(m.setUTCFullYear(t,s,Math.max(i,l)),m):new Date(NaN)}(l.restDateString,l.year)}if(isNaN(a)||!a)return new Date(NaN);var u=a.getTime(),c=0;if(s.time&&(isNaN(c=function(e){var t=e.match(P);if(!t)return null;var r=A(t[1]),a=A(t[2]),n=A(t[3]);return(24===r?0===a&&0===n:n>=0&&n<60&&a>=0&&a<60&&r>=0&&r<25)?36e5*r+6e4*a+1e3*n:NaN}(s.time))||null===c))return new Date(NaN);if(s.timezone){if(isNaN(n=function(e){if("Z"===e)return 0;var t=e.match(S);if(!t)return 0;var r="+"===t[1]?-1:1,a=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return n>=0&&n<=59?r*(36e5*a+6e4*n):NaN}(s.timezone)))return new Date(NaN)}else{var m=new Date(u+c),d=new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds());return d.setFullYear(m.getUTCFullYear()),d}return new Date(u+c+n)}function R(e){return e?parseInt(e):1}function A(e){return e&&parseFloat(e.replace(",","."))||0}var O=[31,null,31,30,31,30,31,31,30,31,30,31];function w(e){return e%400==0||e%4==0&&e%100}var _=[1,1],B=e=>{var[t,r]=_;return{url:e,width:t,height:r}};function E(e){var{copy:t={},simple:r={},detailed:a={},tracking:{totalNoCurrency:n=0,rate:o}}=e;return{nightlyRate:a.nightlyRate,totalDueToday:a.payAtBookingTotal,totalDueAtStay:a.payAtStayTotal,rawTotalDueToday:a.rawPayAtBookingTotal,totalPrice:a.grandTotal,partnerCurrencyTotalPrice:a.partnerCurrencyGrandTotal,partnerCurrency:t.localizedPartnerCurrency,totalOptimusDiscount:a.optimusDiscountsTotal,totalPriceWithoutOptimusDiscount:a.roomRateTotalBeforeOptimusDiscount,displayPrice:r.displayPrice,rawDisplayPrice:o,priceMode:r.metaDisplayPriceStrategy,referenceRateDisplayDiscount:r.referenceRateDisplayDiscount,referenceRateDisplayPrice:r.referenceRateDisplayPrice,nightlyRateByNumNights:a.nightlyRateByNumNights,subTotal:a.subtotal,taxesAndFees:a.roomTaxesAndFees,rawTaxesAndFees:a.rawRoomTaxesAndFees,rawTaxesAndFeesBreakdown:a.rawRoomTaxesAndFeesBreakdown,bookingPrice:Number(n),chargeTime:a?.paymentTimeframe==="PAS"?"stay":"upfront",excludedTaxesAndFees:r.excludedTaxesAndFees,cashbackReward:t.cashbackReward||null,rawCashbackSubsidy:a.rawCashbackSubsidy||null,rawCashbackCommissionPool:a.rawCashbackCommissionPool||null}}function U(e,t){var{roomKey:r,shortDescription:a,longDescription:o,amenities:i,amenityInfo:s,refundable:l,cancellationDeadlinePretty:u,cancellationDeadlineTimePretty:c,cancellationPolicy:m,otherPolicy:d,paymentPolicy:p,defaultHotelPhoto:g,photos:h,modifiedFields:f,bookingClickToken:y,numRoomsAvailable:v,isUrgent:D,partnerRoomInfo:T,bedConfiguration:b}=e,{maxOccupancy:N}=t,I=E(e.priceUI);return{key:r,title:n(a),description:o,...I,partnerRoomInfo:T,amenities:i||[],mealPlanAmenities:s||[],refundablePolicy:l,cancellationDeadline:c||u,cancellationPolicy:m,otherPolicy:d,paymentPolicy:p,photos:h?h?.map(e=>e.url).map(e=>({id:Math.round(99999999*Math.random()+3e8),photoSizes:[B(e)]})):[],defaultHotelPhoto:g?.url||null,maxOccupancy:N,modifiedFields:f||[],bookingClickToken:y,numRoomsAvailable:v,isUrgent:D,rateVerification:null,bedConfiguration:b}}function L(e){var t=k(e.checkInDs),r=k(e.checkOutDs);return{checkInDate:a(t)?t:new Date,checkOutDate:a(r)?r:new Date,numberOfNights:e.nights,numberOfRooms:e.rooms,numberOfAdults:e.adults,numberOfChildren:e.totalChildren,geoName:e.geoName}}function j(e,t=!1){return{name:n(e?.address?.name)||"",address:e?.address?.displayAddress,thumbnailUrl:e?.thumbnailUrl,locationId:e?.locationId||0,checkInOutPolicy:t?e?.checkInOutPolicy:void 0}}function x(e){return{partnerReservationId:e?.partnerReservationId,reservationEmail:e?.reservationEmail}}function F(e){return{attractionsUrl:e?.attractionsUrl||"",geoName:e?.geoName||"",geoId:e?.geoId||null}}function M(e,t,r){var a=!1;return setTimeout(()=>{a=!0},12e4),new Promise(n=>{var o=()=>{fetch("/data/1.0/booking/status",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-By":r},body:JSON.stringify({bookingId:e,accommodationId:t})}).then(e=>e.json()).then(e=>{e.is_complete?"SUCCEEDED"===e.state.toUpperCase()?n({success:!0,reservationId:e.reservation_id,isNewMember:e.member_info?.is_new_member||!1,guestPasswordToken:e.member_info?.pw_guest_token||null}):n({success:!1,reservationId:e.reservation_id,errors:e.booking_errors}):a?n({success:!1,reservationId:"",errors:[{isRecoverable:!1,translationString:"",problemName:"RequestTimeout",problemType:"Internal",fieldName:null}]}):setTimeout(o,2e3)})};o()})}function z(e){return"ROOM_SELECTION_UNAVAILABLE"===e||"AVAILABILITY_RESULT_UNAVAILABLE"===e}function q(e,t,r){var[a,n]=o({roomSelectionData:e,partnerData:t}),[u,m]=o(!1),d=c(),[p,g]=o(!1),[h,f]=o(null),y=i(a?.roomSelectionData?.polling?.pollCount||0),v=s(()=>{var e,{roomSelectionData:{polling:t}}=a;y.current+=1,g(!1),(e={...t,pollCount:y.current},fetch("/data/1.0/booking/detailedavailability",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-By":d},body:JSON.stringify({...e,pollCount:e.pollCount+1})})).then(e=>{if(e.ok)return e.json();throw Error("Error while polling room selection")}).then(e=>{var{roomSelection:t,error:a}=e;a&&f(a);var{partnerInfos:o}=t||{},i=o?.map(e=>{var t,a;return{name:e.partner,hotel:j(e?.hotel),rooms:(t=e?.roomList||[],a=e?.roomTypes||[],t.map(e=>U(e,a[e.roomTypeCode]||{}))||[]),coBrandingLogoUrl:r&&e?.supportsPlusCoBranding?e?.logoUrl:void 0,partnerTermsAndConditions:e?.termsAndConditions,partnerPrivacyPolicy:e?.privacyPolicy,isAgoda:e?.isAgoda||!1}});t?.polling?.complete||u?n({roomSelectionData:t,partnerData:i}):z(a?.errorType)?g(!1):g(!0)}).catch(e=>{f(e)})},[r,y,u,a,d]),D=!!a.roomSelectionData?.polling?.complete||u||z(h?.errorType);return l(()=>{if(p){var e=setTimeout(v,1e3);return()=>clearTimeout(e)}},[v,p]),l(()=>{D||v()},[]),l(()=>{var e=setTimeout(()=>m(!0),2e4);return()=>clearTimeout(e)},[]),[D,a,h]}var $=(e,t,r)=>{var a=d();return u(()=>{var n=e.flatMap(e=>e.rooms);if(!t||!r||!n.length)return n;var o=-1===r&&"BASE_RATE"===n[0].priceMode&&m("optimus_paywall"),i=a.formatCurrencyInteger(o?n[0].rawDisplayPrice:r),s=t.metaAmountSaved?a.formatCurrencyInteger(t.metaAmountSaved):void 0,l=t.metaStrikethroughPrice?a.formatCurrencyInteger(t.metaStrikethroughPrice):void 0;return n.map(e=>e.displayPrice===i?{...e,totalOptimusDiscount:s,referenceRateDisplayPrice:l}:e)},[r,a,t,e])},V="PlusBlockedRooms",H=e=>{l(()=>{if(!e)return()=>{};var t=p.addListener("PlusBlockedRooms",(t,r)=>{r!==t&&e()});return()=>{t()}},[e]);var t=(e,t,r)=>({adults:e.numberOfAdults,children:e.numberOfChildren,rooms:e.numberOfRooms,checkIn:e.checkInDate.toDateString(),checkOut:e.checkOutDate.toDateString(),provider:r,roomKey:t}),r=(e,t)=>e.adults===t.adults&&e.children===t.children&&e.rooms===t.rooms&&e.checkIn===t.checkIn&&e.checkOut===t.checkOut&&e.roomKey===t.roomKey&&e.provider===t.provider;return{addBlockedRoom:s((e,r,a)=>{if(a){var n=p.get(V)||[];n.push(t(r,e,a)),p.set(V,n,36e5)}},[]),filterBlockedRooms:s((e,a,n)=>{if(!n)return e;var o=p.get(V);return o?e.filter(e=>!o.some(o=>r(o,t(a,e.key,n)))):e},[])}},Y="PlusRefreshRooms",Z=(e,t)=>{var r=(e,t)=>e.geoName===t.geoName&&e.numberOfRooms===t.numberOfRooms&&e.numberOfNights===t.numberOfNights&&e.numberOfAdults===t.numberOfAdults&&e.numberOfChildren===t.numberOfChildren;return l(()=>{if(!t||!e)return()=>{};var a=p.addListener(Y,(a,n)=>{a&&n!==a&&a.some(t=>r(e,t))&&t()});return()=>{a()}},[t,e]),{refreshRoomList:s(e=>{var t=p.get(Y)||[];t.push(e),p.set(Y,t,3e4)},[])}},G=(e,t)=>{if(t)return[{name:"BAD_API_RESPONSE",type:"Internal",message:t}];if(!e||!Object.keys(e).length)return[{name:"BAD_API_RESPONSE",message:"No data returned in the response",type:"Internal"}];if(e.error?.errorType)return[{name:"BAD_API_RESPONSE",message:e.error.errorType,type:"Internal"}];var{bookingSessionId:r,roomSelection:a,bookingContext:n,optimusSubscriptionPrice:o}=e,i=[];if(r||i.push({name:"INVALID_BOOKING_ID",message:"Booking Session Id empty",type:"Internal"}),o||i.push({name:"INVALID_SUBSCRIPTION_PRICE",message:"No subscription price information returned in the response",type:"Internal"}),!n)return i.push({name:"NO_BOOKING_CONTEXT",message:"No booking context returned in the response",type:"Internal"}),i;if(!a){var{hotelOverviewUrl:s}=n;i.push({name:"INVALID_ROOM_SELECTION",message:"No room selection data returned in the response",type:"Internal",...s&&{redirectUrl:s}})}return i.length>0?i:null},W=({loading:e,data:t,error:r,children:a})=>{var n=u(()=>{var a=e?null:b(t,r);return{loading:e,errors:a,bookingData:e||a||!t?null:function(e){var{bookingSessionId:t,bookingContext:{vaultUrl:r,countries:a,isSecurelyLoggedIn:n,hotelReviewUrl:o,hotelOverviewUrl:i,originalMetaPrice:s},roomSelection:l,roomSelection:{partnerInfos:u,trackingContext:c,summary:m,polling:{selectedRoomKey:d}},optimusSubscriptionPrice:p,optimusSavings:g,optimusBranding:h,isPlusIB:f}=e;return{bookingSessionId:t,checkoutSession:{vaultUrl:r,isSecurelyLoggedIn:n},partnerData:u?.map(e=>{var t,r;return{name:e.partner,hotel:j(e?.hotel,f&&!!e?.showCheckInOutPolicy),rooms:(t=e?.roomList||[],r=e?.roomTypes||[],t.map(e=>U(e,r[e.roomTypeCode]||{}))||[]),coBrandingLogoUrl:f&&e?.supportsPlusCoBranding?e?.logoUrl:void 0,privacyPolicyList:f&&e?.showPrivacyPolicy?e?.privacyPolicyList:void 0,partnerTermsAndConditions:e?.termsAndConditions,partnerPrivacyPolicy:e?.privacyPolicy,acceptedCreditCardTypes:e?.acceptedCreditCardTypes,isAgoda:e?.isAgoda||!1}}),trackingContext:c,roomSelectionSummary:L(m),countries:a,roomSelectionData:l,optimusSubscriptionPrice:p,bookingAdditionalContext:{hotelReviewUrl:o,hotelOverviewUrl:i,originalMetaPrice:s},optimusSavings:g,selectedRoomKey:d,optimusBranding:h,isCashback:f}}(t)}},[e,t,r]),o=!e&&t?t.diagnostics:null;return g(h,{children:[a(n),o&&f("div",{hidden:!0,id:"__diagnostics__",children:o})]})};return e({mapHotelData:j,mapReservationData:x,mapReservationGeoData:F,mapRoomData:U,mapRoomPriceInfo:E,mapRoomSelectionSummaryData:L,pollBookingConfirmation:M,useRoomSelectionPolling:q}),[()=>{v=$,D=H,T=Z,b=G,N=y((e,t)=>{var r=new URLSearchParams,a=Object.keys(e.route).filter(e=>"src"!==e);a.sort(),a.forEach(t=>{var a=e.route[t];a&&r.set(t,a)}),r.append("isTaMember",e.auth.isMember?"true":"false"),r.has("sar")||r.append("sar","true");var n=t(`/data/1.0/booking/rooms?${r.toString()}`);return()=>{var{data:e=null,loading:t=!1,error:r=null}=n.get();return{loading:t,error:r,data:e}}})(W),e({HotelCheckoutParsedDataSupplier:W,default:N,mapHotelData:j,mapReservationData:x,mapReservationGeoData:F,mapRoomData:U,mapRoomPriceInfo:E,mapRoomSelectionSummaryData:L,pollBookingConfirmation:M,useBlockedRooms:D,useRefreshRooms:T,useRoomSelectionPolling:q,useRoomsWithPatchedSavings:v})},[e=>n=e.unescapeHtml,e=>(o=e.useState,i=e.useRef,s=e.useCallback,l=e.useEffect,u=e.useMemo),e=>c=e.useSecurityToken,e=>m=e.featureIsEnabled,e=>d=e.useIntlFormatter,e=>p=e.default,e=>(g=e.jsxs,h=e.Fragment,f=e.jsx),e=>y=e.bind]]},["irfizf","o4yt4q","ahlu9q","skjzuv","7thqz4","9b9b10","21h32l","6z5q2p"]]);
