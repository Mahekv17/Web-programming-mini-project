(this.$WP=this.$WP||[]).push(["xf498w",(e,t)=>{var r,a,o,i,d,n,u,s,g,l=()=>{if("undefined"!=typeof window){var e=window?.location?window.location.toString():"";return e.substring(e.indexOf("#"))}return""},m=()=>{var e=window.location.toString();if(e.indexOf("#")>0){var t=e.substring(0,e.indexOf("#"));window.history.replaceState(window.history.state,document.title,t)}},c=e=>{var t=e.media?.media,r=e.referenceCompoundMediaId;if(t){var{mediaId:a,type:o}=t;return{id:a,type:o}}return r||null},h=e=>{var t=n(e.locationId,{albumId:e.albumId,typeId:e.typeId,categoryId:e.categoryId,mediaId:c(e),sort:i.sort},u);return t?`#${t}`:(m(),`#${u}`)},p=e=>{var{locationId:t,state:{mediaId:r,albumId:a,typeId:o,categoryId:i}}=s(e),d={locationId:t||0,referenceCompoundMediaId:r,albumId:a,typeId:o,categoryId:i};return Object.keys(d).filter(e=>"referenceCompoundMediaId"!==e).forEach(e=>{isNaN(d[e])&&delete d[e]}),d},I=e=>({...g,...e}),w=()=>I(p(l())),f=e=>{var t=h({...w(),...e});if(window.location.hash!==t)try{window.history.replaceState(window.history.state,document.title,t)}catch(e){if("SecurityError"===e.name&&e.message.includes("Attempt to use history.replaceState()")){console.error("The hash was attempted to be updated too often in too little time, causing a security error",e);return}throw e}},y=e=>`${window&&window.location.href.split("#")[0]}${h(e)}`,S=e=>{var t,r,a,o,i,d=e.replace("#photos;","?"),n=new URLSearchParams(d);return n.has("aggregationId")&&(t=Number(n.get("aggregationId"))),n.has("aggregationId")&&(r=Number(n.get("albumid"))),n.has("aggregationId")&&(a=Number(n.get("filter"))),n.has("ff")?(o=Number(n.get("ff")),i="u"):n.has("panoId")&&(o=Number(n.get("panoId")),i="pano"),o&&i?{referenceCompoundMediaId:{id:o,type:i},albumId:t,typeId:a,categoryId:r}:{albumId:t,typeId:a,categoryId:r}},b=e=>{var t=w();return t.referenceCompoundMediaId={id:e.mediaId,type:e.type},y(t)};return[()=>{g={albumId:r.ALL_ALBUMS,typeId:a(o().mediaGroup),categoryId:r.ALL_ALBUMS,sort:d.featured},e({generateMediaViewerState:p,generateMediaViewerStateFromPVRoute:S,generateUrlHashString:h,getHash:l,getMediaViewerState:w,getShareUrl:b,getUrlFromMVState:y,initDefaults:I,oldHashRouteStart:"#photos",removeHash:m,updateHash:f})},[e=>(r=e.AlbumTypes,a=e.getMediaGroupIdForString,o=e.getMediaFilterToRetrieveAllPhotos,i=e.DEFAULT_STATE),e=>d=e.mediaSorts,e=>(n=e.generateFragmentRoute,u=e.defaultFragmentPrefix,s=e.getStateFromFragment)]]},["3w1vrt","j9pg61","b53rh8"]]);
