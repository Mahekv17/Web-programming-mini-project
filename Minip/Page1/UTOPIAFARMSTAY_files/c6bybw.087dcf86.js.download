(this.$WP=this.$WP||[]).push(["c6bybw",(e,t)=>{var n,a,s,i,o,l,c,r,p,d,u,h,g,_,m,v,f,k,w,x,R,q,I,b,S=(e,t)=>{e&&fetch("/AnswersAjax",{credentials:"same-origin",method:"POST",body:n(e),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(t)},T=({locationId:e,topicId:t,text:n,requestValidation:a,onResponse:s})=>{n&&S({act:"ap",psttxt:n,tpcid:t,pid:-1,altsessid:a.altSessionId,token:a.csrfToken,lcid:e,"g-recaptcha-response":a.captchaResponse.token,geetest_challenge:a.captchaResponse.challenge,geetest_validate:a.captchaResponse.validate,geetest_seccode:a.captchaResponse.seccode,captcha_id:a.captchaResponse.captcha_id,captcha_output:a.captchaResponse.captcha_output,lot_number:a.captchaResponse.lot_number,pass_token:a.captchaResponse.pass_token,gen_time:a.captchaResponse.gen_time,useJson:!0},s)},y=({locationId:e,text:t,optIn:n,redirect:a,requestValidation:s,onResponse:i})=>{t&&S({act:n?"ats":"at",topicText:t,detail:e,pid:-1,optIn:n,altsessid:s.altSessionId,token:s.csrfToken,"g-recaptcha-response":s.captchaResponse.token,geetest_challenge:s.captchaResponse.challenge,geetest_validate:s.captchaResponse.validate,geetest_seccode:s.captchaResponse.seccode,captcha_id:s.captchaResponse.captcha_id,captcha_output:s.captchaResponse.captcha_output,lot_number:s.captchaResponse.lot_number,pass_token:s.captchaResponse.pass_token,gen_time:s.captchaResponse.gen_time,redirect:a},i)},N=({id:e,token:t,onResponse:n})=>{e&&S({act:"dp",pstid:e,token:t},n)},P=({id:e,token:t,onResponse:n})=>{e&&S({act:"dt",tpcid:e,token:t},n)},M=(e,t,n,a)=>{S({altsessid:n.altSessionId||"",act:"av",pstid:t,vs:e,pid:-1,token:n.csrfToken,useJson:!0},a),s({module:"faq",action:"click",context:1===e?"upvote":"downvote"})},$=({postingId:e,requestValidation:t,onResponse:n})=>{M(1,e,t,n)},j=({postingId:e,requestValidation:t,onResponse:n})=>{M(-1,e,t,n)},C=(e,t,n,a,s,i,o)=>{if(t&&n){var l=[i.topPosting];return s&&l.unshift(null),n&&l.push(...Array(i.postCount-1).fill(null)),a(l)}if(!e)return a(o);var c=s&&e.postings&&e.postings[0]?e.postings[0]:null,r=n&&e.topics&&e.topics[0]?e.topics[0].postings:o;return a(n||s?c?[c,...r.filter(e=>e&&e.id!==c.id)]:r:r.length>0?[r[0]]:[])},L=({topic:e,query:t,children:n,expanded:a,newPostingId:s})=>{var o=!!s&&(!e.topPosting||e.topPosting.id!==s),l=e.topPosting?[e.topPosting]:[];return i(c,{query:t,variables:{fetchTopic:a,fetchPosting:o,topicId:a?e.id:null,postingId:s},requestPolicy:"network-only",children:({fetching:t,data:s})=>C(s,t,a,n,o,e,l)})},E=({loggedInUserId:e,csrfToken:t,altSessId:n,call:a,isMobile:s,children:l})=>i(o,{children:l(()=>{if(e){a({csrfToken:t,altSessId:n});return}var i={flow:"CORE_COMBINED",pid:-1,userRequestedForce:!0,onSuccess:()=>a({csrfToken:t,altSessId:n})};window.require(["trjs!ta/registration/RegOverlay"],e=>e.showRegOverlay(null,null,s,i))})}),O={item:"SzvEE"},A=e=>{var{localize:t}=u();return l("ul",{children:[e.location&&e.location.geoName?i("li",{className:O.item,children:t("qa_guidelines_relevant_visit",{loc_name:e.location.geoName})}):null,e.location&&e.location.parentGeoId?i("li",{className:O.item,children:i("span",{dangerouslySetInnerHTML:{__html:t.string("qa_guidelines_forums_new_tab",{forum_link:_({page:"ShowForum",g:e.location.parentGeoId})})}})}):null,i("li",{className:O.item,children:t("qa_guidelines_objective")}),i("li",{className:O.item,children:t("qa_guidelines_links")}),i("li",{className:O.item,children:i("span",{dangerouslySetInnerHTML:{__html:t.string("qa_guidelines_adhere_new_tab",{help_link:"https://www.tripadvisorsupport.com/hc/articles/201996887"})}})})]})},F=({modalName:e,location:t})=>{var{localize:n}=u();return l(m,{name:e,children:[i("div",{className:"ZxeMp MF",children:n("qa_guidelines_before")}),i("div",{className:"LurUT",children:n("qa_please_keep")}),i(q,{location:t})]})},z={guidelinesControl:"S2 C5 NB _S",community:"BqJol d _S",linkText:"kSqhw"};function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G={translateModal:"VBSHE"},U=({locationId:e,topicId:t,postingId:n,contentLanguage:s,pageLanguage:c,children:r})=>{if(s===c)return null;var p,d=s.replace(/^zh/,"zh-"),u=["toverlay",e,t,n,d,c].join("-");return p=n?`/MachineTranslation?g=0&d=${e}&t=${t}&lp=${n}&page=posting&sl=${d}&tl=${c}`:`/MachineTranslation?g=0&d=${e}&t=${t}&page=topic&sl=${d}&tl=${c}`,l(o,{children:[i(g,{name:u,children:r}),i(m,{name:u,children:i(a,{url:p,children:({loading:e,data:t})=>e?i(v,{}):i("div",{className:G.translateModal,dangerouslySetInnerHTML:{__html:t}})})})]})};return[()=>{w={submitAnswer:T,submitQuestion:y,deleteAnswer:N,deleteQuestion:P,upVote:$,downVote:j},x=L,R=r(e=>({loggedInUserId:e.auth.loggedInUserId,csrfToken:e.auth.csrfToken,altSessId:e.auth.altSessId,isMobile:"MOBILE"===e.meta.device.viewportCategory}))(E),q=A,I=F,e("PostingGuidelinesLink$1",k=class extends p{render(){var{theme:e,location:t,inlineExpansion:n}=this.props,{expand:a}=this.state;return l(o,{children:[l("div",{className:e&&z[e]||z.guidelinesControl,onClick:n?this.toggleExpansion:null,children:[n?i("span",{className:z.linkText,children:i(d,{id:"qa_posting_guidelines"})}):l(o,{children:[i(g,{name:`posting_guidelines_${t.locationId}`,children:e=>i("span",{className:z.linkText,onClick:e,children:i(d,{id:"qa_posting_guidelines"})})}),i(I,{modalName:`posting_guidelines_${t.locationId}`,location:t})]}),n?i(h,{name:a?"caret-up":"caret-down"}):null]}),a?i(q,{location:t}):null]})}constructor(...e){super(...e),B(this,"state",{expand:!1}),B(this,"toggleExpansion",()=>{this.setState(e=>({expand:!e.expand}))})}}),B(k,"defaultProps",{theme:void 0,inlineExpansion:!1}),b=k,U.defaultProps={postingId:void 0},e({AnswerProvider:x,AuthGated:R,PostingGuidelinesLink:b,TranslateModal:r(e=>({pageLanguage:f(e)}))(U),answersAjax:w})},[e=>(n=e.formEncode,a=e.AjaxRequest),e=>s=e.default,e=>(i=e.jsx,o=e.Fragment,l=e.jsxs),e=>c=e.Query,e=>r=e.connect,e=>p=e.Component,e=>(d=e.default,u=e.useLocalize),e=>h=e.Icon,e=>g=e.Opener,e=>_=e.buildUrl,e=>m=e.Modal,e=>v=e.LoadingSpinner,e=>f=e.contentLangFromState]]},["1w1pct","4axon3","21h32l","mqwhqn","2mj4nv","o4yt4q","7thqz4","ybxsmg","80hn7v","bvvaww","8m6oju","l9qeu7","jlm8x1"]]);
