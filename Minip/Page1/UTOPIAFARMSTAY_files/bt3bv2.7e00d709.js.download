(this.$WP=this.$WP||[]).push(["bt3bv2",(e,t)=>{var r,a,i,n,s,l,o,u,c,E,d,m,_,T,I,v,p,y,b,g,f,A,w,S,C,h,R,x,D,P,L,H,k,B,V,z,X,M,j,q,N,Z,O,K="test",W="EXIT",Y="brazeInitialized",G="brazeInterstitialsData",U="visible",F="USER",$=["Hotels","Hotel_Review","AttractionProductReview"],Q="ExperiencesExitIntentInterstitial",J="EXP_EXIT",ee=["HotelsFusion"],et="HotelsExitIntentInterstitial",er="HOTELS_EXIT",ea=(e,t=!1)=>{switch(e){case"AttractionProductReview":return"experiences_exit_interstitial_v1_1690405639";case"HotelsFusion":case"Hotel_Review":if(t)return"hotels_exit_interstitial__h_us_v1__1694445041";return"hotels_exit_interstitial__h_row_v1__1694445188";default:return""}},ei=(e,t=!1)=>{var{page:r}=I(),a=g(),{userAgentCategory:i}=y(),n=ea(r,"en-US"===a),s=b({experimentKeys:[n],skipImpression:t},e||!n||"DESKTOP"!==i);return s?s[n]:""},en=()=>{var{page:e}=I(),t=ee.includes(e),r=v(p.TARGETING),{userAgentCategory:a}=y();return H(t&&r&&"DESKTOP"===a,!0)===K},es=(e,t)=>{var[r,n]=a(!1);return i(()=>{var r;return t||(r=setTimeout(()=>n(!0),e)),()=>clearTimeout(r)},[e,t]),r},el=()=>{var{page:e}=I(),t=$.includes(e),r=v(p.TARGETING),{userAgentCategory:a}=y(),i=k();return B(0,!1)&&(t&&r&&"DESKTOP"===a||i)},eo={__key:0xb28d0534b3ca,id:"b28d0534b3caa770",loc:{},definitions:[]},eu="braze_alias_call_1696520108",ec=()=>{var[e,n]=a(null),s=_(),l=!!(s.startsWith("hare")||s.includes("qa.tripadvisor-preview.com")),o=b({experimentKeys:[eu]}),[{data:u}]=f({query:eo,pause:o?.[eu]!=="test"});return i(()=>{var e;return(async()=>{var{initialize:r,automaticallyShowInAppMessages:a,openSession:i,destroy:s,getUser:o}=await t("tnit44"),c=r(l?"33cabfd1-22ad-4bb9-b839-923528e22192":"6e55efa5-e689-47c3-a55b-e6d7515a6c5d",{baseUrl:"sdk.iad-05.braze.com",sessionTimeoutInSeconds:60,minimumIntervalBetweenTriggerActionsInSeconds:1,enableLogging:l,allowUserSuppliedJavascript:!0,manageServiceWorkerExternally:!0,noCookies:!0,inAppMessageZIndex:10104,doNotLoadFontAwesome:!0});if(c){a(),i(),e=s;var E=u?.data?.hashedPersistentCookieSHA256;if(E){var d=o();d?.addAlias(E,"ta_persistent_cookie_sha256")}T.set(Y,!0,x)}else T.set(Y,!1,x);n(c)})(),()=>{e&&e()}},[u,l]),r(E,{component:d.braze,status:e?m.ok:m.missing,enabled:null!==e})},eE=()=>V()?r(l,{children:r(ec,{})}):null,ed={error:"/HD6ArEBAtTwBI7ZVjta90qp4unZxfbHurUTBGj19rQQ0+FVYV8WhM5fZH0wzrq+",ok:"/HD6ArEBAtTwBI7ZVjta9/W82wQIR3jyvbLaRjmIOqY="},em=(e,t)=>{M.set(e,t)},e_=e=>M.get(e),eT=()=>{var e=V(),{browser:r,os:a}=y(),i=w(),s=g(),l=A(),{params:o}=I(),u="detailId"in o?o.detailId:0,c="geoId"in o?o.geoId:0,E=X.useConstantIncrementCallback();return n(async({event:n,eventProperties:o})=>{if(T.get(Y)&&e){var{logCustomEvent:d}=await t("tnit44");try{var m=e_(n);d(n,{...o,page:l,detailId:u,geoId:c,deviceType:i,locale:s,customEventData:m,isCustomEventDataPresent:!!m}),E(ed.ok)}catch(e){console.error(`[Braze] Problem occurred on: ${r.family} - ${r.majorVersion} | ${a.family} - ${a.majorVersion} | `,e),E(ed.error)}}},[e,l,u,c,i,r,a,s,E])},eI=(e,t,r)=>{var a=e.get(t),i=new Date().getTime();return a&&a?.find(e=>e.key===r&&(!e.ttl||e.ttl>=i))||null},ev=(e,t,r)=>{var a=ep(),i=eI(a,e,t)?.value;return i&&"object"==typeof i?i[r]:null},ep=()=>new Map(T.get(G)),ey=(e,t,r)=>{var a=e.get(t),i=new Date().getTime();return a=a?.filter(e=>e.key!==r.key&&(!e.ttl||e.ttl>=i))||[],r.ttl&&(r.ttl+=i),a.push(r),e.set(t,a),e},eb=(e,t,r,a)=>{if(null!=e){var i=ep();ey(i,e,{key:t,value:r,ttl:a}),T.set(G,Array.from(i.entries()))}},eg=(e,t,r,a)=>{if(null!=e){var i=ev(e,a,t);eb(e,a,{[t]:null==i?1:i+1},r)}},ef=e=>{var t=q.getObjectValueFromStorage(e,U,F);return null==t?0:t},eA=e=>ef(e)+1,ew={interstitialMaxDisplay:-1,template:"",trackItemName:"",exitDelayTime:-1},eS=()=>{var{page:e}=I();switch(e){case"AttractionProductReview":return{interstitialMaxDisplay:3,template:J,trackItemName:Q,exitDelayTime:P};case"HotelsFusion":return{interstitialMaxDisplay:3,template:er,trackItemName:et,exitDelayTime:L};default:return ew}},eC=()=>{var{params:e}=I(),t=A(),r=!!R(),a=h();return{trackImpression:n(({itemName:i,customData:n})=>{a({itemName:i,page:t,geoId:"geoId"in e&&e.geoId||null,locationId:"detailId"in e&&e.detailId||null,customData:JSON.stringify({...n,signedIn:r,isEligibility:!0})})},[a,e,t,r])}},eh=({dismiss:e=()=>{}})=>{var[t,r]=a(!1),[l,o]=a(!0),u=H(l),{interstitialMaxDisplay:c,template:E,trackItemName:d,exitDelayTime:m}=N(),_=j(),T=n(()=>{_({event:W,eventProperties:{abTestValue:u,displayCount:eA(E)}})},[E,u,_]),I=s(T),{trackImpression:v}=Z(),p=n(()=>{var e=eA(E);u===K&&e<=c&&v({itemName:d,customData:{impressionCount:e,sessionCount:e}})},[E,c,d,u,v]),y=s(p),b=n(e=>{t&&(e.clientY<=0&&u?(T(),p()):e.clientY<=0&&!u&&o(!1))},[t,u,T,p]);return i(()=>{I.current!==T&&(I.current=T),y.current!==p&&(y.current=p)},[T,p]),i(()=>{!l&&u&&(I.current(),y.current())},[u,l]),i(()=>{var e=setTimeout(()=>r(!0),m);return()=>{e&&clearTimeout(e)}},[m]),C("mouseout",b),C("beforeunload",e),null},eR=()=>{var e=e=>r(eh,{dismiss:e}),t="interstitials-braze";return S({factory:({dismiss:t})=>e(t),eventTypes:[t],key:t,tier:700}),null};return[()=>{D=12*(30*(x=864e5)),P=15e3,L=1e4,H=ei,k=en,B=es,V=el,z=eE,X=new o({metricName:"/HD6ArEBAtTwBI7ZVjta93C0lsh0r5m7+1h2uMR+Ctj6S7rKi5+tmJVNyp6fjPiaq5rr6c5rsp+XGnGmyrZ6y64ZVL67MHPVqEacrZP0wZY=",version:0,additionalLabels:["/HD6ArEBAtTwBI7ZVjta98Sr44QR3Z1Lmq5fKuJGI7cdKriEzyXX7YlewxVwwfzY"],labelHooks:[u,c]}),M=new Map,j=eT,q={getObjectValueFromStorage:ev,getBrazeStorageData:ep,saveValueToLocalStorage:eb,saveDisplayCountToBrazeStorage:eg},N=eS,Z=eC,O=eR,e({BRAZE_EXIT_EVENT_KEY:W,BRAZE_EXIT_EVENT_TEST_BUCKET:K,Braze:z,EXP_EXIT_TEMPLATE:J,EXP_EXIT_TRACK_ITEM_NAME:Q,HOTELS_EXIT_TEMPLATE:er,HOTELS_EXIT_TRACK_ITEM_NAME:et,HOTEL_REVIEW_EXIT_TEMPLATE:"HOTEL_REVIEW_EXIT",InterstitialsBraze:O,LOCAL_STORAGE_TTL_01_YEAR:D,PER_USER_DISPLAY:F,VISIBLE:U,brazeStorage:q,getInterstitialsCustomEventData:e_,getStoredDisplayCount:ef,setInterstitialsCustomEventData:em,useBrazeExitIntentTest:H,useBrazeLogCustomEventCallback:j})},[e=>r=e.jsx,e=>(a=e.useState,i=e.useEffect,n=e.useCallback,s=e.useRef),e=>(l=e.ErrorBoundary,o=e.Counter,u=e.useSourceLabel,c=e.useWebApplicationLabel),e=>(E=e.StatusCounter,d=e.Component,m=e.Status),e=>_=e.useDomainName,e=>T=e.default,e=>I=e.useRoute,e=>(v=e.useConsent,p=e.CategoriesEnum),e=>y=e.useUserAgent,e=>b=e.default,e=>g=e.useLocale,e=>f=e.useQuery,e=>A=e.default,e=>w=e.useViewportCategory,e=>S=e.usePopupHierarchyRender,e=>C=e.useWindow,e=>h=e.default,e=>R=e.useUserId]]},["21h32l","o4yt4q","83pm0d","6nmgrj","qlcuu5","9b9b10","fgwvq1","973cci","nnprhg","gugp1d","7thqz4","mqwhqn","eqoaya","ys6v1o","xo1is3","ltllz9","xg719z","52far5"]]);
