(this.$WP=this.$WP||[]).push(["onawe4",(e,t)=>{var i,o,n,s,r,d,a,l,c,p,_,m="SP_PARTNER_NOTIFICATION_IFRAME",g=(e,t)=>"DISCOVERY_META_PREFERENCE"===e.sponsoredType&&"1"===t.slot,u=(e,t,i,o,n)=>{var r={};e&&(r={placement_slot_name:e.sponsoredPlacementSlot.name,location_id:e.locationId,sponsored_type:e.sponsoredType,sl_line_item_id:e.slLineItemId,page_geo_id:t,chosen_location_id:e.locationId,listing_key:e.listingKey,trip_ads_select_guid:e.tripAdsSelectRequestGuid,trip_ads_id:e.tripAdsId}),s(i,o,{...r,...n})},y=(e,t)=>{u(e,t,"impression","paid_backup_sponsored_listing_displayed",{})},I=(e,t)=>{e.tripAdsSelectRequestGuid&&t(e.tripAdsSelectRequestGuid,"")},f=()=>window.JS_SECURITY_TOKEN,E=()=>({"content-type":"application/json","x-requested-by":f()}),k=(e,{route:t},i,o,n)=>{if(e){var s={area:e.sponsoredPlacementSlot.name,click_type:i,dest:o,from:t.page,is_backfill:!0,listing_key:e.listingKey,location_id:e.locationId,sl_line_item_id:e.slLineItemId,trip_ads_id:e.tripAdsId,auction_offer_key:n};fetch("/SponsoredListingCommerce/1.0/increment_click_metric",{method:"POST",headers:E(),credentials:"same-origin",body:JSON.stringify(s)}).then(e=>(e.ok||e.statusText,e)).catch(e=>{console.error(`Error sending commerce click: ${e.message}`)})}},h=e=>{var t=document.getElementById(m);t||((t=document.createElement("iframe")).setAttribute("id",m),t.setAttribute("style","position: absolute; visibility: hidden; right: 0; bottom: 0; width: 1px; height: 1px"),c(p.ALL,()=>{document.body&&t&&document.body.appendChild(t)})),t.src=e},A=(e,t)=>{if(t&&h(t),e){var i=n().getState();i?.meta?.lineItemsByLoc&&(y(e,i.page.geoId),r(e.partnerImpressionNotificationURL),I(e,d))}},v=(e,t)=>{if(e){var i=n().getState();if(i?.meta?.lineItemsByLoc){var{url:o,...s}=t,r=t.isBooking?"paid_backup_sponsored_ib_click":"paid_backup_sponsored_meta_click";u(e,i.page.geoId,"action",r,s);var d=g(e,t);d&&k(e,i,"META",t.providerName,t.ttAOK),I(e,d?a:l)}}},S=({sponsoredListingData:e,delayedPartnerNotificationUrl:t})=>(_(()=>{A(e,t),e&&window.require(["commerce/offerclick"],t=>{t.on("afterClick",t=>{v(e,t)})})},[e]),null),b=e=>i(S,{sponsoredListingData:e?.listing?.sponsoredListingData,delayedPartnerNotificationUrl:e?.listing?.delayedPartnerNotificationUrl}),T=({optimusEnabled:e})=>i(o,{optimusEnabled:e,children:e=>i(b,{...e})});return[()=>{e({HotelReviewSpTrackingRenderer:b,default:T})},[e=>i=e.jsx,e=>o=e.MetaQueryPoller,e=>n=e.getStore,e=>s=e.trackEventWithContext,e=>(r=e.notifyPartner,d=e.logTripAdsImpressionEvent,a=e.logTripAdsClickEvent,l=e.logTripAdsClickUnpaidEvent),e=>(c=e.requestConsent,p=e.CategoriesEnum),e=>_=e.useEffect]]},["21h32l","nzwvrx","45ddp0","4axon3","41w2j7","973cci","o4yt4q"]]);
