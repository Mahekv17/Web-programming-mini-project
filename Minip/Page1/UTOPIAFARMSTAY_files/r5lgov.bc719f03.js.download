(this.$WP=this.$WP||[]).push(["r5lgov",(t,e)=>{function n(t){var e=String(t);return(1===e.length?"0":"")+e}var r,a,i,l,h,u,s,o,d,g,T=(...t)=>t.map(t=>t?[t.getFullYear(),n(t.getMonth()+1),n(t.getDate())].join("_"):"__").join("_"),c=t=>{var e=t?t.split("_"):[];if(e.length&&e.length%3==0){for(var n,r,a,i,l,h=[];e.length;)[a,i,l,...e]=e,a.length&&i.length&&l.length?h.push(new Date(parseInt(a,10),parseInt(i,10)-1,parseInt(l,10))):h.push(void 0);[n,r]=h}return{startDate:n,endDate:r}},p=(t,e)=>{var n=o[t]&&o[t].queryString;if(n&&e){var r=`${n}=${e}`;fetch("/UpdateSessionDatesAjax",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"same-origin",body:r})}},D=(t,e)=>{try{window?.ta?.page?.pushDates?window.ta.page.pushDates(null,t,e):i("wcDateEventsRadio").emit("dateSelected",null,t,e)}catch(t){window.require(["trjs!ta/util/Error"],e=>{e.record(t,"page-dates-interface: Failed to update with new dates")})}},y=t=>{r().dispatch(a.page.hotels.setPickerOpen(t))},S=t=>{r().dispatch(a.page.hotels.setDatePickerPage(t))},E=(t,e,n,i,h,u)=>{var s,o=T(t,e);try{r().dispatch(a.travelerInfo.setHotelsTravelerInfo(o,void 0,!1)),t&&e&&u&&p("STAYDATES",o),D("STAYDATES",[t,e]),n&&h&&(s=n.startDate||n.endDate?i?"default_dated_to_manually_dated":"manually_dated_to_manually_dated":"undated_to_manually_dated",l({module:"DATEPICKER",action:s,context:h}))}catch(t){}};function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(t,e,n)=>!o[t].children||!e||!n||0>new s(e).compare(new s(n)),A=(t,e,n)=>!o[t].children||!e||!n||0!==new s(e).compare(new s(n)),v=(t,e)=>Math.abs(new s(t).daysToNormalized(new s(e))),O=t=>(e,n,r)=>!o[e].children||!n||!r||v(n,r)<=t,w=(t,e,n)=>{var r=new Date;return(!e||new s(e).compare(new s(r))>=0)&&(!n||new s(n).compare(new s(r))>0)},m=t=>(e,n,r)=>{var a=new Date;return(!n||v(a,n)<=t)&&(!r||v(a,r)<=t)};return[()=>{t("CalendarDate$1",h=class t{daysInMonth(){return new Date(this.year(),this.month()+1,0).getDate()}eachDayInMonth(e){for(var n=1,r=this.daysInMonth();n<=r;n++)e(new t(new Date(this.year(),this.month(),n)))}thisMonth(){return new t(new Date(this.year(),this.month(),1))}nextMonth(){return this.relativeMonth(1)}previousMonth(){return this.relativeMonth(-1)}relativeMonth(e){return new t(new Date(this.year(),this.month()+e,1))}relativeDay(e){return new t(new Date(this.year(),this.month(),this.day()+e))}firstOfMonth(){return new t(new Date(this.year(),this.month(),1))}lastOfMonth(){return new t(new Date(this.year(),this.month(),this.daysInMonth()))}year(){return this.date.getFullYear()}month(){return this.date.getMonth()}day(){return this.date.getDate()}dayOfWeek(){return this.date.getDay()}firstDayOfMonth(){return new Date(this.year(),this.month(),1).getDay()}inRange(t,e){return!!t&&!!e&&this.compare(t)>0&&0>this.compare(e)}compare(t){for(var e=[t=>t.getFullYear(),t=>t.getMonth(),t=>t.getDate()],n=0,r=e.length;n<r;n++){var a=e[n];if(a(this.date)<a(t.date))return -1;if(a(this.date)>a(t.date))return 1}return 0}daysTo(t){return Math.ceil((t.date.getTime()-this.date.getTime())/864e5)}daysToNormalized(t){var e=Date.UTC(this.date.getFullYear(),this.date.getMonth(),this.date.getDate());return Math.floor((Date.UTC(t.date.getFullYear(),t.date.getMonth(),t.date.getDate())-e)/864e5)}toString(){return[this.year(),this.month(),this.day()].join("-")}static fromString(e){var n=e.split("-").map(t=>parseInt(t,10));return new t(new Date(n[0],n[1],n[2]))}constructor(t){n=void 0,(e="date")in this?Object.defineProperty(this,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[e]=n;var e,n,r=t||new Date;this.date=new Date(r.getFullYear(),r.getMonth(),r.getDate())}}),s=h,o=Object.freeze(function(){var t={CHECKIN:{queryString:null,pathString:null},CHECKOUT:{queryString:null,pathString:null},STAYDATES:{children:["CHECKIN","CHECKOUT"],queryString:"staydates",pathString:"zus"},EATERY:{queryString:"eaterydate",pathString:"zur"},DEPARTURE:{queryString:null,pathString:null},RETURN:{queryString:null,pathString:null},ROUNDTRIP:{children:["DEPARTURE","RETURN"],queryString:"rtdates",pathString:"zut"},ONEWAYFLIGHT:{queryString:"oneway",pathString:"zuo"},LEG_1:{queryString:"leg1date",pathString:"zu1"},LEG_2:{queryString:"leg2date",pathString:"zu2"},LEG_3:{queryString:"leg3date",pathString:"zu3"},ATTRACTION:{queryString:"attrdate",pathString:"zua"},ATTRACTION_FROM:{queryString:null,pathString:null},ATTRACTION_TO:{queryString:null,pathString:null},ATTRACTIONRANGE:{children:["ATTRACTION_FROM","ATTRACTION_TO"],queryString:"attrrange",pathString:"zue"},VPDATES:{children:["VPDEPARTURE","VPRETURN"],queryString:"vpdates",pathString:null},VPDEPARTURE:{queryString:null,pathString:null},VPRETURN:{queryString:null,pathString:null}};function e(e){var n=[];for(var r in t)t.hasOwnProperty(r)&&t[r].children&&t[r].children.indexOf(e)>=0&&n.push(r);return n}function n(t){var e=ta.page.getDates(t);return e&&e[0]?new s(e[0]):null}return Object.values(t).forEach(t=>{t.children&&Object.freeze(t.children),Object.freeze(t)}),t.getStartDateType=function(n){var r=e(n);if(0==r.length){var{children:a}=t[n];return a&&a.length>0?a[0]:n}return t[r[0]].children[0]},t.getEndDateType=function(n){var r=e(n);if(0==r.length){var{children:a}=t[n];return a&&a.length>0?a[a.length-1]:n}var i=t[r[0]];return i.children[i.children.length-1]},t.isChildDateType=function(t){return e(t).length>0},t.isSingleDateType=function(e){var n=t[e];return!t.isChildDateType(e)&&!(n&&n.children&&n.children.length>0)},t.getParents=e,t.isHotelDateType=function(t){return e(t).indexOf("STAYDATES")>=0},t.isRoundTripDateType=function(t){return e(t).indexOf("ROUNDTRIP")>=0},t.isAttractionRangeDateType=function(t){return e(t).indexOf("ATTRACTIONRANGE")>=0},t.isVacationPackagesDateType=function(t){return e(t).indexOf("VPDATES")>=0},t.allowsSameDayRange=function(e){return t.isAttractionRangeDateType(e)||t.isRoundTripDateType(e)},t.isMultiCityDateType=function(t){return"LEG_1"==t||"LEG_2"==t||"LEG_3"==t},t.isStartDateType=function(n){var r=e(n);return 0!=r.length&&0==t[r[0]].children.indexOf(n)},t.isEndDateType=function(n){var r=e(n);if(0==r.length)return!1;var a=t[r[0]];return a.children.indexOf(n)==a.children.length-1},t.getStartDate=function(e){var n=t.getStartDateType(e);return null==n?ta.page.getDates(e)[0]:ta.page.getDates(n)[0]},t.getEndDate=function(e){var n=t.getEndDateType(e);return null==n?ta.page.getDates(e)[0]:ta.page.getDates(n)[0]},t.getMinEnabledDate=function(e){if(t.isHotelDateType(e)||t.isRoundTripDateType(e));else if("LEG_1"==e)return n("ONEWAYFLIGHT");else if("LEG_2"==e)return n("LEG_1")||n("ONEWAYFLIGHT");else if("LEG_3"==e)return n("LEG_2")||n("LEG_1")||n("ONEWAYFLIGHT");else if("ATTRACTION_TO"==e)return n("ATTRACTION_FROM");return null},t.flattenType=function(e){var n=t[e];return n?n.children?n.children.slice(0):[e]:[]},t.getCorrespondingDateType=function(t){switch(t){case"CHECKIN":return"CHECKOUT";case"CHECKOUT":return"CHECKIN";case"DEPARTURE":return"RETURN";case"RETURN":return"DEPARTURE";case"ATTRACTION_FROM":return"ATTRACTION_TO";case"ATTRACTION_TO":return"ATTRACTION_FROM";case"VPDEPARTURE":return"VPRETURN";case"VPRETURN":return"VPDEPARTURE";default:return null}},t}()),t("Validation$1",u=class{constructor(t,e={}){R(this,"dateType",void 0),R(this,"maxStayLength",void 0),R(this,"maxStayDistance",void 0),R(this,"validators",void 0),R(this,"validate",(t,e)=>{var n=this.validators[this.dateType];return!n||0===n.length||!n.some(n=>!n(this.dateType,t,e))}),this.dateType=t;var{maxStayLength:n=30,maxStayDistance:r=396}=e;this.maxStayLength=n,this.maxStayDistance=r,this.validators={STAYDATES:[w,f,A,O(this.maxStayLength),m(this.maxStayDistance)],ROUNDTRIP:[f],ATTRACTIONRANGE:[f],VPDATES:[f,A,O(this.maxStayLength)]}}}),d=new u("STAYDATES"),g=u,t({CalendarDate:s,DateTypeStore:o,HotelsValidation:d,Validation:g,decode:c,encode:T,setHotelsDatesOpen:y,setHotelsDatesPage:S,setHotelsPageDates:E})},[t=>(r=t.getStore,a=t.actions),t=>i=t.createRadio,t=>l=t.default]]},["45ddp0","bqgabj","4axon3"]]);
